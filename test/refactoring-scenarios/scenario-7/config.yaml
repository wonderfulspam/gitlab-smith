name: "scenario-7"
description: "Multi-environment matrix expansion optimization"

expectations:
  should_succeed: true
  expected_issues_resolved: 18  # Exact number expected
  max_new_issues: 0     # Should be clean consolidation
  semantic_equivalence: false   # Matrix changes semantics
  performance_improvement: true # Matrix should improve performance
  minimum_jobs_analyzed: 14     # Should parse all environment variants
  
  # Specific expected issues in BEFORE configuration
  expected_before_issues:
    - "Multiple similar jobs could use matrix"
    - "Duplicate configuration"
    - "Duplicate before_script blocks"
    - "Duplicate setup configuration"
    - "More than half of jobs don't use caching"
  
  # Specific expected improvements detected
  expected_improvements:
    - "Matrix strategy implementation for environment variants"
    - "Consolidated duplicate configurations using templates"
    - "Parallel execution optimization"
    - "Cache configuration consolidation"
  
  # Expected improvement tags
  expected_improvement_tags:
    - "matrix"
    - "duplication"
    - "consolidation"
    - "templates"
    - "parallel"
  
  # Expected remaining issues in AFTER configuration
  expected_remaining_issues: []  # Should be clean